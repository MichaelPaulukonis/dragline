(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function m(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=m(s);fetch(s.href,c)}})();const W="modulepreload",T=function(e){return"/dragline/"+e},O={},_=function(o,m,r){let s=Promise.resolve();if(m&&m.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");s=Promise.allSettled(m.map(g=>{if(g=T(g),g in O)return;O[g]=!0;const x=g.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${S}`))return;const t=document.createElement("link");if(t.rel=x?"stylesheet":W,x||(t.as="script"),t.crossOrigin="",t.href=g,h&&t.setAttribute("nonce",h),document.head.appendChild(t),x)return new Promise((M,w)=>{t.addEventListener("load",M),t.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return o().catch(c)})};await _(()=>import("./index-OOssF0th.js"),[]);const X=await _(()=>import("./grids.20250403T123247766Z-LmNibMVZ.js"),[]);let Y,R;async function A(){R=X.default}await A();new p5(e=>{let o=[],m=!1,r=-1,s=10,c=0,u=0,h=5,g,x,S,t={cols:0,rows:0,cellSize:15},M=" .-|:*+",w=M[0],v=null;const z=document.getElementById("info-box"),B=document.getElementById("close-info-box"),b=()=>{z.classList.contains("hidden")?z.classList.remove("hidden"):z.classList.add("hidden")};B.addEventListener("click",()=>{b()}),e.preload=function(){v=e.loadFont("saxmono.ttf")},e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight),t.cols=Math.floor(e.width/t.cellSize),t.rows=Math.floor(e.height/t.cellSize),h=Math.floor(t.cols/2),e.textFont(v),e.noStroke(),L(),e.textSize(t.cellSize+4),e.textAlign(e.LEFT,e.TOP),console.log(Y),k(o),y(),b()};function P(l){let d;do d=Math.floor(Math.random()*R.length);while(l.has(d));l.add(d);let n=R[d].map(C=>C.replace(/ /g,w));const i=Math.max(...n.map(C=>C.length)),f=n.length,a=Math.max(0,Math.min(t.cols-i,c+Math.floor((Math.random()-.5)*h))),E=Math.max(0,Math.min(t.rows-f,u+Math.floor((Math.random()-.5)*h)));return{index:d,lines:n,x:a,y:E,w:i,h:f}}function k(l){const d=new Set(l.map(n=>n.index));for(c=Math.floor(Math.random()*t.cols),u=Math.floor(Math.random()*t.rows);l.length<s;)l.push(P(d))}const L=()=>{S=e.drawingContext.createLinearGradient(0,0,e.width,0),S.addColorStop(0,"#f8b500"),S.addColorStop(1,"#fceabb")};function H(){e.drawingContext.fillStyle=S,e.drawingContext.fillRect(0,0,e.width,e.height)}const y=()=>{if(H(),m){const a=60-r*(-180/o.length)%-180,E=50,C=100,I=100;e.colorMode(e.HSB),e.fill(a,E,C,I),e.rect(o[r].x*t.cellSize,o[r].y*t.cellSize,o[r].w*t.cellSize,o[r].h*t.cellSize),e.colorMode(e.RGB),e.fill(0)}e.fill(0);const l=Array(t.rows).fill().map(()=>Array(t.cols).fill(w)),d=(n,i,f)=>n.y+i>=0&&n.y+i<t.rows&&n.x+f>=0&&n.x+f<t.cols;for(let n of o)for(let i=0;i<n.lines.length;i++){const f=n.lines[i];for(let a=0;a<f.length;a++)if(f[a]!==w)try{d(n,i,a)&&l[n.y+i][n.x+a]===w&&f[a]!==" "&&(l[n.y+i][n.x+a]=f[a])}catch(E){console.error(E),console.error(`Error at position (${n.x+a}, ${n.y+i})`)}}for(let n=0;n<l.length;n++)for(let i=0;i<l[n].length;i++){const f=i*t.cellSize,a=n*t.cellSize;e.text(l[n][i],f,a)}};e.draw=()=>{m&&y()},e.mousePressed=()=>{for(let l=0;l<o.length;l++){let d=o[l];const n=d.x*t.cellSize,i=d.y*t.cellSize,f=d.w*t.cellSize,a=d.h*t.cellSize;if(e.mouseX>n&&e.mouseX<n+f&&e.mouseY>i&&e.mouseY<i+a){m=!0,r=l,g=e.mouseX-n,x=e.mouseY-i;break}}},e.mouseDragged=()=>{if(m){let l=o[r];l.x=Math.floor((e.mouseX-g)/t.cellSize),l.y=Math.floor((e.mouseY-x)/t.cellSize)}},e.mouseReleased=()=>{m=!1,y()},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight),L()},e.keyPressed=async()=>{if(e.key==="i"||e.keyCode===e.ESCAPE)b();else if(e.key===" ")w=M[(M.indexOf(w)+1)%M.length],y();else if(e.key==="r")o.length=0,k(o),y();else if(e.keyCode===e.RIGHT_ARROW){if(o.length<R.length){const l=new Set(o.map(d=>d.index));o.push(P(l)),s++,y()}}else if(e.keyCode===e.LEFT_ARROW)o.length>1&&(o.pop(),s--,y());else if(e.key==="n")try{await A(),o.length=0,k(o),y()}catch(l){console.error("Failed to fetch or process new data from tumblrRandomPost.",l)}!m||r===-1||(e.keyCode===e.DOWN_ARROW?r<o.length-1&&([o[r],o[r+1]]=[o[r+1],o[r]],r++,y()):e.keyCode===e.UP_ARROW&&r>0&&([o[r],o[r-1]]=[o[r-1],o[r]],r--,y()))}});
