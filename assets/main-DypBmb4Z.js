(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function m(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=m(i);fetch(i.href,c)}})();const B="modulepreload",W=function(e){return"/dragline/"+e},_={},k=function(o,m,r){let i=Promise.resolve();if(m&&m.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");i=Promise.allSettled(m.map(g=>{if(g=W(g),g in _)return;_[g]=!0;const x=g.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${S}`))return;const t=document.createElement("link");if(t.rel=x?"stylesheet":B,x||(t.as="script"),t.crossOrigin="",t.href=g,h&&t.setAttribute("nonce",h),document.head.appendChild(t),x)return new Promise((M,y)=>{t.addEventListener("load",M),t.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return o().catch(c)})};await k(()=>import("./index-OOssF0th.js"),[]);const v=await k(()=>import("./grids.20250403T123247766Z-LmNibMVZ.js"),[]);new p5(e=>{let o=[],m=!1,r=-1,i=10,c=0,u=0,h=5,g,x,S,t={cols:0,rows:0,cellSize:15},M=" .-|:*+",y=M[0],L=null;const z=document.getElementById("info-box"),A=document.getElementById("close-info-box"),C=()=>{z.classList.contains("hidden")?z.classList.remove("hidden"):z.classList.add("hidden")};A.addEventListener("click",()=>{C()}),e.preload=function(){L=e.loadFont("saxmono.ttf")},e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight),t.cols=Math.floor(e.width/t.cellSize),t.rows=Math.floor(e.height/t.cellSize),h=Math.floor(t.cols/2),e.textFont(L),e.noStroke(),P(),e.textSize(t.cellSize+4),e.textAlign(e.LEFT,e.TOP),O(o),w(),C()};function b(s){let d;do d=Math.floor(Math.random()*v.default.length);while(s.has(d));s.add(d);let n=v.default[d].map(R=>R.replace(/ /g,y));const l=Math.max(...n.map(R=>R.length)),f=n.length,a=Math.max(0,Math.min(t.cols-l,c+Math.floor((Math.random()-.5)*h))),E=Math.max(0,Math.min(t.rows-f,u+Math.floor((Math.random()-.5)*h)));return{index:d,lines:n,x:a,y:E,w:l,h:f}}function O(s){const d=new Set(s.map(n=>n.index));for(c=Math.floor(Math.random()*t.cols),u=Math.floor(Math.random()*t.rows);s.length<i;)s.push(b(d))}const P=()=>{S=e.drawingContext.createLinearGradient(0,0,e.width,0),S.addColorStop(0,"#f8b500"),S.addColorStop(1,"#fceabb")};function H(){e.drawingContext.fillStyle=S,e.drawingContext.fillRect(0,0,e.width,e.height)}const w=()=>{if(H(),m){const a=60-r*(-180/o.length)%-180,E=50,R=100,I=100;e.colorMode(e.HSB),e.fill(a,E,R,I),e.rect(o[r].x*t.cellSize,o[r].y*t.cellSize,o[r].w*t.cellSize,o[r].h*t.cellSize),e.colorMode(e.RGB),e.fill(0)}e.fill(0);const s=Array(t.rows).fill().map(()=>Array(t.cols).fill(y)),d=(n,l,f)=>n.y+l>=0&&n.y+l<t.rows&&n.x+f>=0&&n.x+f<t.cols;for(let n of o)for(let l=0;l<n.lines.length;l++){const f=n.lines[l];for(let a=0;a<f.length;a++)if(f[a]!==y)try{d(n,l,a)&&s[n.y+l][n.x+a]===y&&f[a]!==" "&&(s[n.y+l][n.x+a]=f[a])}catch(E){console.error(E),console.error(`Error at position (${n.x+a}, ${n.y+l})`)}}for(let n=0;n<s.length;n++)for(let l=0;l<s[n].length;l++){const f=l*t.cellSize,a=n*t.cellSize;e.text(s[n][l],f,a)}};e.draw=()=>{m&&w()},e.mousePressed=()=>{for(let s=0;s<o.length;s++){let d=o[s];const n=d.x*t.cellSize,l=d.y*t.cellSize,f=d.w*t.cellSize,a=d.h*t.cellSize;if(e.mouseX>n&&e.mouseX<n+f&&e.mouseY>l&&e.mouseY<l+a){m=!0,r=s,g=e.mouseX-n,x=e.mouseY-l;break}}},e.mouseDragged=()=>{if(m){let s=o[r];s.x=Math.floor((e.mouseX-g)/t.cellSize),s.y=Math.floor((e.mouseY-x)/t.cellSize)}},e.mouseReleased=()=>{m=!1,w()},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight),P()},e.keyPressed=()=>{if(e.key==="i")C();else if(e.key===" ")y=M[(M.indexOf(y)+1)%M.length],w();else if(e.key==="r")o.length=0,O(o),w();else if(e.keyCode===e.RIGHT_ARROW){if(o.length<v.default.length){const s=new Set(o.map(d=>d.index));o.push(b(s)),i++,w()}}else e.keyCode===e.LEFT_ARROW&&o.length>1&&(o.pop(),i--,w());!m||r===-1||(e.keyCode===e.DOWN_ARROW?r<o.length-1&&([o[r],o[r+1]]=[o[r+1],o[r]],r++,w()):e.keyCode===e.UP_ARROW&&r>0&&([o[r],o[r-1]]=[o[r-1],o[r]],r--,w()))}});
